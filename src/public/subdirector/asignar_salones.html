<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <title>Subdirector - Asignar salones por grupo</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">

    <link rel="stylesheet" href="subdirector.css">

    <style>
        body {
            background: #0a1a2f;
            color: #fff;
        }

        .navbar {
            background: #006896;
        }

        .bg-primary-custom {
            background: #006896 !important;
        }

        .btn-primary-custom {
            background: #006896 !important;
            border-color: #006896 !important;
            color: #fff !important;
        }

        .btn-outline-primary-custom {
            color: #006896 !important;
            border-color: #006896 !important;
        }

        .btn-outline-primary-custom:hover {
            background: #006896 !important;
            color: #fff !important;
        }

        .celda-libre {
            background-color: #2b2b2b;
            color: #ccc;
            cursor: default;
        }

        .celda-receso {
            background-color: #f1c40f;
            color: #000;
            font-weight: bold;
            cursor: default;
        }

        .celda-clase {
            background-color: #1f3b4d;
            color: #fff;
            cursor: pointer;
        }

        .celda-clase small {
            display: block;
            font-size: 0.75rem;
            color: #ddd;
        }

        th,
        td {
            vertical-align: middle !important;
            text-align: center;
        }

        tbody tr:nth-child(even) td.celda-libre {
            background-color: #242424;
        }

        @media (min-width: 992px) {
            #cardAsignarSalon {
                position: sticky;
                top: 90px;
            }
        }
    </style>
</head>

<body>

    <nav class="navbar navbar-dark px-4">
        <a href="/subdirector/menu.html" class="navbar-brand">Gestor de Horarios</a>
        <span class="navbar-text">Asignar salones por grupo (Subdirector)</span>
        <button class="btn btn-light" onclick="location.href='/login/index.html'">Cerrar sesi贸n</button>
    </nav>

    <div class="container mt-4">
        <h2 class="mb-3">Asignar salones manualmente - Subdirector</h2>

        <!-- Alertas generales -->
        <div id="alert-container" class="mb-3"></div>
        <!-- Mensaje de completitud de materias -->
        <div id="alert-completitud" class="mb-3"></div>

        <!-- Selector de semestre + grupo -->
        <div class="card mb-3">
            <div class="card-body">
                <div class="row g-3 align-items-end">
                    <div class="col-md-4">
                        <label class="form-label">Semestre</label>
                        <select id="selectSemestre" class="form-select">
                            <option value="">Todos</option>
                            <option value="1">1</option>
                            <option value="2">2</option>
                            <option value="3">3</option>
                            <option value="4">4</option>
                            <option value="5">5</option>
                            <option value="6">6</option>
                            <option value="7">7</option>
                            <option value="8">8</option>
                            <option value="9">9</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <label class="form-label">Grupo</label>
                        <select id="selectGrupo" class="form-select">
                            <option value="">Selecciona un grupo...</option>
                        </select>
                    </div>
                    <div class="col-md-4">
                        <button class="btn btn-primary-custom w-100" onclick="cargarHorarioSeleccionado()">
                            Ver horario
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Contenido principal: tabla + panel de asignaci贸n -->
        <div class="row">
            <!-- Tabla de horario -->
            <div class="col-lg-8 mb-3">
                <div class="card">
                    <div class="card-header bg-primary-custom text-white">
                        Horario (7:00 a 15:00)
                    </div>
                    <div class="card-body table-responsive">
                        <table class="table table-dark table-striped align-middle mb-0">
                            <thead>
                                <tr>
                                    <th>Hora</th>
                                    <th>Lunes</th>
                                    <th>Martes</th>
                                    <th>Mi茅rcoles</th>
                                    <th>Jueves</th>
                                    <th>Viernes</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyHorario">
                                <!-- Se llena con JS -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>

            <!-- Panel lateral para asignar sal贸n -->
            <div class="col-lg-4 mb-3">
                <div id="cardAsignarSalon" class="card text-dark d-none">
                    <div class="card-header bg-primary-custom text-white">
                        <h5 class="card-title mb-0">Asignar sal贸n a la materia</h5>
                    </div>
                    <div class="card-body">
                        <input type="hidden" id="panelGrupoId">
                        <input type="hidden" id="panelMateriaId">

                        <p class="small text-muted mb-2">
                            Selecciona una celda con clase para elegir un sal贸n que se aplicar谩
                            a <strong>todas las horas</strong> de esa materia en el grupo.
                        </p>

                        <div class="mb-2">
                            <strong>Grupo:</strong> <span id="panelGrupoTexto"></span><br>
                            <strong>Materia:</strong> <span id="panelMateriaTexto"></span><br>
                            <strong>Maestro:</strong> <span id="panelMaestroTexto"></span><br>
                            <strong>Sal贸n actual:</strong> <span id="panelSalonActualTexto"></span>
                        </div>

                        <hr>

                        <div class="mb-3">
                            <label class="form-label">Nuevo sal贸n para toda la materia</label>
                            <select id="selectSalon" class="form-select">
                                <option value="">Selecciona un sal贸n...</option>
                            </select>
                            <div class="form-text">
                                Solo se muestran salones con capacidad suficiente para el grupo.
                            </div>
                        </div>
                    </div>
                    <div class="card-footer d-flex justify-content-between">
                        <button type="button" class="btn btn-secondary" onclick="cerrarPanelSalon()">
                            Cancelar
                        </button>
                        <!-- NUEVO BOTN -->
                        <button type="button" id="btnVerHorarioSalon" class="btn btn-outline-primary-custom flex-fill">
                            Ver horario del sal贸n
                        </button>
                        <button type="button" class="btn btn-primary-custom" onclick="asignarSalonMateria()">
                            Asignar sal贸n a la materia
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal: Horario del sal贸n (SUBDIRECTOR) -->
    <div class="modal fade" id="modalHorarioSalonSubdirector" tabindex="-1" aria-hidden="true">
        <div class="modal-dialog modal-xl modal-dialog-centered modal-dialog-scrollable">
            <div class="modal-content bg-dark text-white">
                <div class="modal-header">
                    <h5 class="modal-title" id="modalHorarioSalonSubdirectorLabel">Horario del sal贸n</h5>
                    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"
                        aria-label="Cerrar"></button>
                </div>
                <div class="modal-body">
                    <div class="table-responsive">
                        <table class="table table-dark table-striped table-bordered align-middle text-center">
                            <thead>
                                <tr>
                                    <th>Hora</th>
                                    <th>Lunes</th>
                                    <th>Martes</th>
                                    <th>Mi茅rcoles</th>
                                    <th>Jueves</th>
                                    <th>Viernes</th>
                                </tr>
                            </thead>
                            <tbody id="tbodyHorarioSalonSubdirector"><!-- se llena por JS --></tbody>
                        </table>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script src="/subdirector/asignar_salones.js"></script>
</body>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
    crossorigin="anonymous"></script>

<script src="/subdirector/asignar_salones.js"></script>
<!--  NUEVO: cargar el JS del bot贸n "Ver horario del sal贸n" -->
<script src="/subdirector/salones_ver_horario.js"></script>
</body>

</html>


</html>